#!/usr/bin/sh
. "$(dirname "$0")/_/husky.sh"

# echo 'ğŸ—ï¸ğŸ‘· Styling, testing and building your project before committing'

echo 'ğŸ•µ Checking your codes before committing ğŸ•µ'

# Check Prettier standards
pnpm run check-format ||
(
    echo 'âŒ Prettier Check Failed âŒ';
    echo 'Run "pnpm run format", add changes and try commit again.';
    false;
)

echo 'âœ… Prettier check passed âœ…'

# End of prettier standards check

# Check ESLint standards

pnpm run check-lint ||
(
    echo 'âŒ ESLint Check Failed âŒ';
    echo 'Make the required changes listed â¬† above â¬†, add changes and try commit again.';
    false;
)

echo 'âœ… ESLint check passed âœ…'

# End of ESLint standards check

# Check TSConfig standards

pnpm run check-types ||
(
    echo 'âŒ Type Check Failed âŒ';
    echo 'Make the required changes listed â¬† above â¬†, add changes and try to commit again.';
    false;
)

echo 'âœ… Type check passed âœ…'

# End of TSConfig standards check

echo 'âœ… All checks passed âœ…'

# Build
echo 'ğŸ‘·ğŸ—ï¸ Building your project ğŸ—ï¸ğŸ‘·'

pnpm run build || (
    echo 'âŒ Build failed âŒ';
    echo 'Next build failed: View the errors â¬† above â¬† to see why.';
    false;
)

echo 'âœ… Build success âœ…'

# End of build

# Styling staged files

echo 'ğŸ‘¨â€ğŸ¨ Styling your codes ğŸ‘¨â€ğŸ¨'

pnpm run format

echo 'âœ… Styling success âœ…\n'

# End of styling staged files

# Commit

echo 'ğŸš€ Committing your codes. ğŸš€'

# End of commit